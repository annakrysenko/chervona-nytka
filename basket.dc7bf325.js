function e(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},r={},a=t.parcelRequired7c6;null==a&&((a=function(e){if(e in n)return n[e].exports;if(e in r){var t=r[e];delete r[e];var a={id:e,exports:{}};return n[e]=a,t.call(a.exports,a,a.exports),a.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){r[e]=t},t.parcelRequired7c6=a),a.register("kyEFX",(function(t,n){var r,a;e(t.exports,"register",(function(){return r}),(function(e){return r=e})),e(t.exports,"resolve",(function(){return a}),(function(e){return a=e}));var o={};r=function(e){for(var t=Object.keys(e),n=0;n<t.length;n++)o[t[n]]=e[t[n]]},a=function(e){var t=o[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t}})),a("kyEFX").register(JSON.parse('{"kFTL4":"basket.dc7bf325.js","lVB40":"thread.b25357dc.png","h5SIw":"thread-2-glaz-fatimy.be1dff83.webp","acBFa":"thread-3-angel.077a994a.webp","95oWP":"thread-4-derevo-zhyttya.0f0e6cb4.webp","he5dz":"thread-5-bezkinechnist.5b8ddccc.webp","d8Sga":"thread-6-zvezda-davida.a18a0b31.webp","exVZ9":"thread-7-klyuch.39f74fb7.webp","fPdwk":"thread-8-chotyrylyst.879ef03b.webp","iF4Wq":"thread-9-pero.36ba6f87.webp","8ASfE":"thread-10-rakushka.7dad3120.webp","jS09d":"thread-11-hamsu.f98ed76e.webp","dLExD":"thread-12-yakor.8973ca81.webp","jhp2P":"thread-13-poveska-glas-fat.ce0a47ca.webp","cwyLu":"thread-14-bulavka.9c25e09b.webp","8d8AD":"thread-15-cherepaha.01d499b8.webp","7SXiu":"thread-16-podveska-lubov.fbe03d5e.webp"}'));const o={openMenuBtn:document.querySelector(".burger-menu-open"),closeMenuBtn:document.querySelector(".burger-menu"),headerMenu:document.querySelector(".header-menu"),nav:document.querySelector(".nav-list"),navAll:document.querySelectorAll(".nav-text"),basketBtn:document.querySelector("#basket"),burgerEl:document.querySelector("#burger"),allOffersSection:document.querySelector("#offers"),advantagesSection:document.querySelector("#advantages"),reviewsSection:document.querySelector("#reviews"),footerSection:document.querySelector("#footer"),allOffersBtn:document.querySelector('[data-section="allOffersSection"]'),advantagesBtn:document.querySelector('[data-section="advantagesSection"]'),reviewsBtn:document.querySelector('[data-section="reviewsSection"]'),footerBtn:document.querySelector('[data-section="footerSection"]'),slider:document.querySelector(".swiper-wrapper"),offersList:document.querySelector(".offers-list"),basketListEl:document.querySelector(".basket-list"),goToOffersBtn:document.querySelector(".basket-link-home"),specials:document.querySelector(".js-special"),heroBtn:document.querySelector(".hero__btn")};(()=>{function e(){o.headerMenu.classList.toggle("visually-hidden"),o.burgerEl.classList.toggle("burger-menu"),o.burgerEl.classList.toggle("burger-menu-open")}o.closeMenuBtn&&o.closeMenuBtn.addEventListener("click",(t=>{e()})),o.headerMenu&&o.headerMenu.addEventListener("click",e)})();const i=[{id:1,name:"Нитка",price:25,url:new URL(a("kyEFX").resolve("lVB40"),import.meta.url).toString()},{id:2,name:"Нитка з кулоном “Око Фатіми”",price:49,url:new URL(a("kyEFX").resolve("h5SIw"),import.meta.url).toString()},{id:3,name:"Нитка з кулоном “Ангел”",price:49,url:new URL(a("kyEFX").resolve("acBFa"),import.meta.url).toString()},{id:4,name:"Нитка з кулоном “Дерево Життя”",price:49,url:new URL(a("kyEFX").resolve("95oWP"),import.meta.url).toString()},{id:5,name:"Нитка з кулоном “Нескінченність”",price:49,url:new URL(a("kyEFX").resolve("he5dz"),import.meta.url).toString()},{id:6,name:"Нитка з кулоном “Зірка Давида”",price:49,url:new URL(a("kyEFX").resolve("d8Sga"),import.meta.url).toString()},{id:7,name:"Нитка з кулоном “Ключ”",price:49,url:new URL(a("kyEFX").resolve("exVZ9"),import.meta.url).toString()},{id:8,name:"Нитка з кулоном “Kонюшина”",price:49,url:new URL(a("kyEFX").resolve("fPdwk"),import.meta.url).toString()},{id:9,name:"Нитка з кулоном “Перо”",price:49,url:new URL(a("kyEFX").resolve("iF4Wq"),import.meta.url).toString()},{id:10,name:"Нитка з кулоном “Мушля”",price:49,url:new URL(a("kyEFX").resolve("8ASfE"),import.meta.url).toString()},{id:11,name:"Нитка з кулоном “Знак Хамсу”",price:49,url:new URL(a("kyEFX").resolve("jS09d"),import.meta.url).toString()},{id:12,name:"Нитка з кулоном “Якор”",price:49,url:new URL(a("kyEFX").resolve("dLExD"),import.meta.url).toString()},{id:13,name:"Підвіска-талісман “Око Фатіми”",price:69,url:new URL(a("kyEFX").resolve("jhp2P"),import.meta.url).toString()},{id:14,name:"Нитка з кулоном “Шпилька”",price:49,url:new URL(a("kyEFX").resolve("cwyLu"),import.meta.url).toString()},{id:15,name:"Нитка з кулоном “Черепаха”",price:49,url:new URL(a("kyEFX").resolve("8d8AD"),import.meta.url).toString()},{id:16,name:"Підвіска-талісман “На кохання”",price:69,url:new URL(a("kyEFX").resolve("7SXiu"),import.meta.url).toString()}],c=e=>JSON.parse(localStorage.getItem(e)),s=(e,t)=>localStorage.setItem(e,JSON.stringify(t)),l=c("Add-to-basket")||[];(e=>{const t=e.map((({id:e,name:t,price:n,url:r,value:a})=>{const o=a*Number(n),i=(e=>1===e?25:5===e?100:10===e?180:e>10&&e<50?18*e:50===e?750:void 0)(a);return`\n        <li class="basket-list_item js-articleId" id="${e}">\n        <div class="basket-item-wrapper">\n          <div class="basket-item-info">\n            <div class="basket-item_title-wrapper">\n              <div class="basket-item_title">\n                <h3 class="basket-subtitle">\n                  ${t}\n                </h3>\n              </div>\n              <div class="basket-item-price-wrapper"><p class="basket-item-price ${1===e?"js-first-position":""}" data-price="${n}">${1===e?i:o} </p><span class="valute">грн</span></div>\n              <button type="button" class="basket-delete-btn" id="${e}">&#10005;</button>\n            </div>\n            <div class="counter counter-basket basket" data-action="counter">\n              <button\n                class="order-decrement ${1===e?"js-reduce-special":"js-reduce"}"\n                type="button"\n                data-action="decrement"\n              >\n              &#8722;\n              </button>\n              <div class="order-value js-value" data-action="value">${a}</div>\n              <button\n                class="order-increment ${1===e?"js-add-special":"js-add"}"\n                type="button"\n                data-action="increment"\n              >\n              &#43;\n              </button>\n            </div>\n          </div>\n          <div class="basket-item_thumb">\n            <img\n              class="basket-item_img"\n              src="${r}"\n              alt="${t}"\n              width="280"\n              height="280"\n            />\n          </div>\n        </div>\n      </li>\n        `})).join("");o.basketListEl&&(o.basketListEl.innerHTML=t)})(i.reduce(((e,t)=>{const n=l.find((e=>Number(e.id)===t.id));return n&&e.push({...t,value:n.value}),e}),[]));const d=c("Add-to-basket")||[],u=document.querySelector(".basket"),m=document.querySelector(".js-basket-section");function p(e){0===e.length&&(m.style.display="none",u.innerHTML='<section class="basket-empty"><div class="basket-empty-text-wrapper"><p class="basket-empty-title">Кошик порожній</p><p class="basket-empty-text">Але це ніколи  не пізно виправити :)</p></div>\n   <button data-section="allOffersSection" class="basket-link-home" type="button" \n      >Продовжити покупки</button></section>',u.addEventListener("click",(e=>{"BUTTON"===e.target.nodeName&&(localStorage.setItem("scroll",e.target.dataset.section),document.location.pathname="/chervona-nytka/index.html")})))}p(d);const v="Add-to-basket",b=c(v)??[],S=document.querySelector("body");function g(e){const t=e.target.closest(".js-articleId"),n=t.id,r=t.querySelector(".js-value"),a=Number(r.textContent),o=b.reduce(((e,t)=>(t.id===n?e.push({id:n,value:a}):e.push(t),e)),[]);s(v,o)}function f(){const e=document.querySelector(".basket-total-price"),t=document.querySelectorAll(".basket-item-price");let n=0;t.forEach((function(e){n+=Number(e.textContent)})),e&&(e.innerHTML=n)}S.addEventListener("click",(function(e){const t=e.target;if(!t.classList.contains("js-add"))return;const n=t.closest(".js-articleId").querySelector(".basket-item-price"),r=Number(n.dataset.price);let a=t.previousElementSibling,o=Number(a.textContent);return o+=1,a.textContent=o,n.textContent=o*r,f(),void g(e)})),S.addEventListener("click",(function(e){const t=e.target;if(!t.classList.contains("js-reduce"))return;const n=t.closest(".js-articleId").querySelector(".basket-item-price"),r=Number(n.dataset.price);let a=t.nextElementSibling,o=Number(a.textContent);return o=o<=1?1:o-1,a.textContent=o,n.textContent=o*r,f(),void g(e)})),S.addEventListener("click",(function(e){const t=e.target;if(!t.classList.contains("basket-delete-btn"))return;const n=t.closest(".js-articleId").id,r=b.filter((e=>Number(e.id)!==Number(n)));0===r.length&&p(r);return s(v,r),void location.reload()}));const k=document.querySelector(".js-reduce-special"),h=document.querySelector(".js-add-special");k&&k.addEventListener("click",(function(e){const t=e.target.closest(".js-articleId"),n=t.querySelector(".basket-item-price"),r=Number(n.dataset.price);let a=t.querySelector(".js-value"),o=Number(a.textContent);o=o<=1||5===o?1:o>5&&o<=20?o-5:o-30,a.textContent=o,1===o&&(n.textContent=o*r);5===o&&(n.textContent=100);o>=10&&o<50&&(n.textContent=18*o);50===o&&(n.textContent=750);return f(),void g(e)})),h&&h.addEventListener("click",(function(e){const t=e.target.closest(".js-articleId"),n=t.querySelector(".basket-item-price"),r=Number(n.dataset.price);let a=t.querySelector(".js-value"),o=Number(a.textContent);o=o<1?o=1:1===o?o+=4:o>=5&&o<20?o+=5:o=50,a.textContent=o,1===o&&(n.textContent=o*r);5===o&&(n.textContent=100);o>=10&&o<50&&(n.textContent=18*o);50===o&&(n.textContent=750);return f(),void g(e)})),f();const y=c("Add-to-basket");function w(e){window.scrollTo({left:0,top:e-108,behavior:"smooth"})}function E(e){let t;return"allOffersSection"===e?t=o.allOffersSection:"advantagesSection"===e?t=o.advantagesSection:"reviewsSection"===e?t=o.reviewsSection:"footerSection"===e&&(t=o.footerSection),t}y&&y.length>0&&(o.basketBtn.classList.remove("header-btn-basket"),o.basketBtn.classList.add("header-btn-basket-full")),y&&0!==c("Add-to-basket").length||(o.basketBtn.classList.add("header-btn-basket"),o.basketBtn.classList.remove("header-btn-basket-full")),window.addEventListener("load",(()=>{const e=localStorage.getItem("scroll");if(e&&"/chervona-nytka/index.html"===document.location.pathname||"/"===document.location.pathname){w(E(e).offsetTop),localStorage.removeItem("scroll","")}})),o.nav&&o.nav.addEventListener("click",(e=>{if("BUTTON"===e.target.nodeName&&("/chervona-nytka/basket.html"===document.location.pathname&&(localStorage.setItem("scroll",e.target.dataset.section),document.location.pathname="/chervona-nytka/index.html"),"/chervona-nytka/index.html"===document.location.pathname||"/chervona-nytka/"===document.location.pathname)){w(E(e.target.dataset.section).offsetTop)}})),window.addEventListener("scroll",(()=>{"/chervona-nytka/index.html"===document.location.pathname&&(o.allOffersSection.getBoundingClientRect().top<138&&o.allOffersSection.getBoundingClientRect().bottom>139?o.allOffersBtn.classList.add("active"):o.allOffersBtn.classList.remove("active"),o.advantagesSection.getBoundingClientRect().top<138&&o.advantagesSection.getBoundingClientRect().bottom>138?o.advantagesBtn.classList.add("active"):o.advantagesBtn.classList.remove("active"),o.reviewsSection.getBoundingClientRect().top<138&&o.reviewsSection.getBoundingClientRect().bottom>o.reviewsSection.getBoundingClientRect().height?o.reviewsBtn.classList.add("active"):o.reviewsBtn.classList.remove("active"),document.documentElement.getBoundingClientRect().bottom<800?o.footerBtn.classList.add("active"):o.footerBtn.classList.remove("active"))}));const L="Add-to-basket",_="selectedvalue",q=document.querySelector(".backdrop"),R=document.querySelector(".basket-total-price"),x=document.querySelector(".basket-form"),F=document.querySelector(".modal-link-home"),B={},H=c(L)||[],j=new Date,C=`${j.getDate().toString().padStart(2,"0")}.${(j.getMonth()+1).toString().padStart(2,"0")}.${j.getFullYear().toString()}`;x&&x.addEventListener("submit",(async function(e){e.preventDefault();const t=O(i),n=R.textContent,r=e.target,a=r.tel.value;B["НОМЕР_ЗАМОВЛЕННЯ"]=`${Date.now()}`,B["ДАТА_ЗАМОВЛЕННЯ"]=`${C}`,B["ІМ'Я"]=r.name.value,B["ТЕЛЕФОН"]=r.tel.value,B["СЛУЖБА_ДОСТАВКИ"]=r.postal.value,B["НОМЕР_ВІДДІЛЕННЯ"]=r.department.value,B["МІСТО"]=r.city.value,B["ЗАГАЛЬНА_СУМА"]=n,B["ТОВАРИ"]=t,A(N(B,a)),localStorage.removeItem(_),localStorage.removeItem(L),I(),x.reset()})),x&&x.addEventListener("change",(function(e){let t=localStorage.getItem(_);t=t?JSON.parse(t):{},t[e.target.name]=e.target.value,localStorage.setItem(_,JSON.stringify(t))})),F.addEventListener("click",I);const A=async e=>{try{const t=await fetch("https://events.sendpulse.com/events/id/1ec8e38825e044b1ec0cd982add80441/8296744",{method:"POST",body:JSON.stringify(e)}),n=await t.json();console.log(n)}catch(e){console.log(e.message)}},N=(e,t)=>{const n=`${Date.now()}`;return{email:`${n}@mail.com`,phone:t,order:JSON.stringify(e,null,2),id:`${n}`}},O=e=>e.reduce(((e,t)=>{const n=H.find((e=>Number(e.id)===t.id));return n&&e.push({"Назва":t.name,"Ціна":String(t.price),"Кількість":String(n.value)}),e}),[]);function I(){q.classList.toggle("is-hidden")}!function(){let e=localStorage.getItem(_);e&&(e=JSON.parse(e),Object.entries(e).forEach((([e,t])=>{x.elements[e]&&(x.elements[e].value=t)})))}(),o.goToOffersBtn.addEventListener("click",(e=>{console.log("first"),localStorage.setItem("scroll",e.target.dataset.section),document.location.pathname="/chervona-nytka/index.html"}));
//# sourceMappingURL=basket.dc7bf325.js.map
